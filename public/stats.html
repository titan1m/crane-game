<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Stats â€” Crane Game</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{--bg:linear-gradient(135deg,#667eea,#764ba2);--card:rgba(255,255,255,0.08);--radius:18px}
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;font-family:Inter,Segoe UI,system-ui;display:flex;align-items:center;justify-content:center;background:var(--bg);padding:18px;color:#fff}
    .card{width:100%;max-width:920px;background:var(--card);padding:28px;border-radius:var(--radius);backdrop-filter:blur(8px)}
    h1{margin:0;font-size:1.4rem}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:18px}
    .tile{background:rgba(255,255,255,0.04);padding:18px;border-radius:12px}
    .muted{opacity:0.9}
    table{width:100%;border-collapse:collapse;margin-top:12px}
    th,td{text-align:left;padding:8px;border-bottom:1px solid rgba(255,255,255,0.04)}
    .btn{margin-top:14px;padding:10px 12px;border-radius:10px;border:none;background:linear-gradient(90deg,#ff9a66,#ff5e62);color:#fff;cursor:pointer}
    @media(max-width:820px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="card">
    <h1>ðŸ“Š Your Statistics</h1>
    <div class="muted">Lifetime stats stored locally in your browser.</div>

    <div class="grid">
      <div class="tile">
        <h3>Summary</h3>
        <div class="muted">Plays, total & average performance</div>
        <div style="display:flex;gap:12px;margin-top:14px">
          <div style="flex:1"><strong id="plays">0</strong><div class="muted">Plays</div></div>
          <div style="flex:1"><strong id="highest">0</strong><div class="muted">Highest</div></div>
          <div style="flex:1"><strong id="avg">0</strong><div class="muted">Avg Score</div></div>
        </div>
        <button class="btn" onclick="resetStats()">Reset Stats</button>
      </div>

      <div class="tile">
        <h3>Recent Games</h3>
        <div class="muted">Last 10 leaderboard entries</div>
        <table>
          <thead><tr><th>Player</th><th>Score</th><th>Level</th><th>Date</th></tr></thead>
          <tbody id="recent"></tbody>
        </table>
      </div>
    </div>

    <div style="margin-top:18px" class="muted">Tip: Achievements are shown on the Achievements page.</div>
  </div>

  <script>
    function loadStats(){
      const s = JSON.parse(localStorage.getItem('craneStats') || '{"plays":0,"totalScore":0,"highest":0}');
      document.getElementById('plays').innerText = s.plays || 0;
      document.getElementById('highest').innerText = s.highest || 0;
      const avg = s.plays ? Math.round((s.totalScore / s.plays)*100)/100 : 0;
      document.getElementById('avg').innerText = avg;

      const lb = JSON.parse(localStorage.getItem('leaderboard')||'[]').slice(0,10);
      const tbody = document.getElementById('recent'); tbody.innerHTML='';
      if(lb.length===0){ tbody.innerHTML='<tr><td colspan="4">No games yet</td></tr>'; return; }
      lb.forEach(it=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${it.name}</td><td>${it.score}/${it.total}</td><td>${it.level}</td><td>${it.date}</td>`;
        tbody.appendChild(tr);
      });
    }

    function resetStats(){
      if(confirm('Reset all stats, leaderboard and achievements? This cannot be undone.')){
        localStorage.removeItem('craneStats');
        localStorage.removeItem('leaderboard');
        localStorage.removeItem('achievements');
        localStorage.removeItem('craneScore');
        loadStats();
        alert('All local progress reset.');
      }
    }

    loadStats();
  </script>
</body>
</html>
