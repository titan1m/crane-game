<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile</title>
  <link rel="stylesheet" href="script.css">
</head>
<body>
  <div class="container">
    <h2>Your Profile</h2>
    <div>
      <label>Username</label>
      <input type="text" id="usernameInput">
    </div>
    <div>
      <label>Email</label>
      <input type="email" id="emailInput">
    </div>
    <button id="saveProfile">Save Profile</button>
    <button onclick="location.href='dashboard.html'">Back to Dashboard</button>
  </div>

  <script>
    const userId = localStorage.getItem("userId");
    const usernameInput = document.getElementById("usernameInput");
    const emailInput = document.getElementById("emailInput");

    fetch(`/user/${userId}`)
    .then(res => res.json())
    .then(data => {
      usernameInput.value = data.username;
      emailInput.value = data.email;
    });

    document.getElementById("saveProfile").addEventListener("click", ()=>{
      fetch(`/user/${userId}`,{
        method:"PUT",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({username: usernameInput.value, email: emailInput.value})
      }).then(()=> alert("Profile updated!"));
    });
  </script>
</body>
</html>
